// æ˜¾ç¤ºå›½å®¶ä¿¡æ¯
async function showCountryInfo(countryName, countryCode) {
    console.log(`æ˜¾ç¤ºå›½å®¶ä¿¡æ¯: ${countryName} (${countryCode})`);
    
    const detailsPanel = document.getElementById('region-details');
    
    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
    detailsPanel.innerHTML = `
        <div class="country-info-loading">
            <h4>${countryName}</h4>
            <div class="loading-spinner"></div>
            <p>åŠ è½½ä¹‰å·¥æ•°æ®ä¸­...</p>
        </div>
    `;
    
    try {
        // æ¨¡æ‹ŸAPIè¯·æ±‚ï¼ˆç¨åæ›¿æ¢ä¸ºçœŸå®æ•°æ®ï¼‰
        const countryData = await fetchCountryData(countryCode);
        
        // æ›´æ–°ä¿¡æ¯é¢æ¿
        detailsPanel.innerHTML = `
            <div class="country-info">
                <div class="country-header">
                    <h4>${countryName}</h4>
                    <span class="country-code">${countryCode}</span>
                </div>
                
                <div class="country-stats">
                    <div class="stat-item">
                        <span class="stat-label">ğŸ“Š æ€»ä¹‰å·¥æ•°</span>
                        <span class="stat-value">${countryData.stats.total || 0}</span>
                    </div>
                    <div class="stat-label">
                        <span class="stat-label">âœ… æ´»è·ƒä¹‰å·¥</span>
                        <span class="stat-value">${countryData.stats.active || 0}</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ğŸŒ ç¿»è¯‘è¯­è¨€</span>
                        <span class="stat-value">${countryData.stats.languages || 0} ç§</span>
                    </div>
                </div>
                
                <div class="country-actions">
                    <button class="btn-action" onclick="addVolunteerTo('${countryCode}')">
                        â• æ·»åŠ ä¹‰å·¥
                    </button>
                    <button class="btn-action" onclick="viewCountryDetails('${countryCode}')">
                        ğŸ“‹ æŸ¥çœ‹è¯¦æƒ…
                    </button>
                </div>
                
                <div class="last-updated">
                    æœ€åæ›´æ–°: ${countryData.lastUpdated || 'æš‚æ— æ•°æ®'}
                </div>
            </div>
        `;
        
    } catch (error) {
        console.error('åŠ è½½å›½å®¶æ•°æ®å¤±è´¥:', error);
        
        detailsPanel.innerHTML = `
            <div class="country-info-empty">
                <h4>${countryName}</h4>
                <p>ğŸ“­ æš‚æ— ä¹‰å·¥æ•°æ®</p>
                <p>æˆä¸ºè¯¥å›½çš„ç¬¬ä¸€ä½ä¹‰å·¥ï¼</p>
                <button class="btn-primary" onclick="initializeCountryData('${countryCode}', '${countryName}')">
                    ğŸš€ åˆå§‹åŒ–æ•°æ®
                </button>
            </div>
        `;
    }
}

// æ¨¡æ‹Ÿè·å–å›½å®¶æ•°æ®
async function fetchCountryData(countryCode) {
    // ç¨åæ›¿æ¢ä¸ºçœŸå®API
    return new Promise(resolve => {
        setTimeout(() => {
            resolve({
                country: countryCode,
                stats: {
                    total: Math.floor(Math.random() * 100),
                    active: Math.floor(Math.random() * 50),
                    languages: Math.floor(Math.random() * 10)
                },
                lastUpdated: new Date().toLocaleDateString('zh-CN')
            });
        }, 500);
    });
}